(function(e){'use strict';var a={init:function(t){var i=this;return i.data('jqv')&&null!=i.data('jqv')||(t=a._saveOptions(i,t),e(document).on('click','.formError',function(){e(this).fadeOut(150,function(){e(this).parent('.formErrorOuter').remove(),e(this).remove()})})),this},attach:function(t){var i,r=this;return i=t?a._saveOptions(r,t):r.data('jqv'),i.validateAttribute=r.find('[data-validation-engine*=validate]').length?'data-validation-engine':'class',i.binded&&(r.on(i.validationEventTrigger,'['+i.validateAttribute+'*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)',a._onFieldEvent),r.on('click','['+i.validateAttribute+'*=validate][type=checkbox],['+i.validateAttribute+'*=validate][type=radio]',a._onFieldEvent),r.on(i.validationEventTrigger,'['+i.validateAttribute+'*=validate][class*=datepicker]',{delay:300},a._onFieldEvent)),i.autoPositionUpdate&&e(window).bind('resize',{noAnimation:!0,formElem:r},a.updatePromptsPosition),r.on('click','a[data-validation-engine-skip], a[class*=\'validate-skip\'], button[data-validation-engine-skip], button[class*=\'validate-skip\'], input[data-validation-engine-skip], input[class*=\'validate-skip\']',a._submitButtonClick),r.removeData('jqv_submitButton'),r.on('submit',a._onSubmitEvent),this},detach:function(){var t=this,i=t.data('jqv');return t.off(i.validationEventTrigger,'['+i.validateAttribute+'*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)',a._onFieldEvent),t.off('click','['+i.validateAttribute+'*=validate][type=checkbox],['+i.validateAttribute+'*=validate][type=radio]',a._onFieldEvent),t.off(i.validationEventTrigger,'['+i.validateAttribute+'*=validate][class*=datepicker]',a._onFieldEvent),t.off('submit',a._onSubmitEvent),t.removeData('jqv'),t.off('click','a[data-validation-engine-skip], a[class*=\'validate-skip\'], button[data-validation-engine-skip], button[class*=\'validate-skip\'], input[data-validation-engine-skip], input[class*=\'validate-skip\']',a._submitButtonClick),t.removeData('jqv_submitButton'),i.autoPositionUpdate&&e(window).off('resize',a.updatePromptsPosition),this},validate:function(){var t=e(this),i=null;if(t.is('form')||t.hasClass('validationEngineContainer')){if(t.hasClass('validating'))return!1;t.addClass('validating');var r=t.data('jqv'),i=a._validateFields(this);setTimeout(function(){t.removeClass('validating')},100),i&&r.onSuccess?r.onSuccess():!i&&r.onFailure&&r.onFailure()}else if(t.is('form')||t.hasClass('validationEngineContainer'))t.removeClass('validating');else{var o=t.closest('form, .validationEngineContainer'),r=o.data('jqv')?o.data('jqv'):e.validationEngine.defaults,i=a._validateField(t,r);i&&r.onFieldSuccess?r.onFieldSuccess():r.onFieldFailure&&0<r.InvalidFields.length&&r.onFieldFailure()}return r.onValidationComplete?!!r.onValidationComplete(o,i):i},updatePromptsPosition:function(t){if(t&&this==window)var i=t.data.formElem,r=t.data.noAnimation;else var i=e(this.closest('form, .validationEngineContainer'));var o=i.data('jqv');return i.find('['+o.validateAttribute+'*=validate]').not(':disabled').each(function(){var t=e(this);o.prettySelect&&t.is(':hidden')&&(t=i.find('#'+o.usePrefix+t.attr('id')+o.useSuffix));var l=a._getPrompt(t),s=e(l).find('.formErrorContent').html();l&&a._updatePrompt(t,e(l),s,void 0,!1,o,r)}),this},showPrompt:function(e,t,i,r){var o=this.closest('form, .validationEngineContainer'),l=o.data('jqv');return l||(l=a._saveOptions(this,l)),i&&(l.promptPosition=i),l.showArrow=!0==r,a._showPrompt(this,e,t,!1,l),this},hide:function(){var t,i=e(this).closest('form, .validationEngineContainer'),r=i.data('jqv'),o=r&&r.fadeDuration?r.fadeDuration:0.3;return t=e(this).is('form')||e(this).hasClass('validationEngineContainer')?'parentForm'+a._getClassName(e(this).attr('id')):a._getClassName(e(this).attr('id'))+'formError',e('.'+t).fadeTo(o,0.3,function(){e(this).parent('.formErrorOuter').remove(),e(this).remove()}),this},hideAll:function(){var a=this,t=a.data('jqv'),i=t?t.fadeDuration:300;return e('.formError').fadeTo(i,300,function(){e(this).parent('.formErrorOuter').remove(),e(this).remove()}),this},_onFieldEvent:function(t){var i=e(this),r=i.closest('form, .validationEngineContainer'),o=r.data('jqv');o.eventTrigger='field',window.setTimeout(function(){a._validateField(i,o),0==o.InvalidFields.length&&o.onFieldSuccess?o.onFieldSuccess():0<o.InvalidFields.length&&o.onFieldFailure&&o.onFieldFailure()},t.data?t.data.delay:0)},_onSubmitEvent:function(){var t=e(this),i=t.data('jqv');if(t.data('jqv_submitButton')){var o=e('#'+t.data('jqv_submitButton'));if(o&&0<o.length&&(o.hasClass('validate-skip')||'true'==o.attr('data-validation-engine-skip')))return!0}i.eventTrigger='submit';var l=a._validateFields(t);return l&&i.ajaxFormValidation?(a._validateFormWithAjax(t,i),!1):i.onValidationComplete?!!i.onValidationComplete(t,l):l},_checkAjaxStatus:function(a){var t=!0;return e.each(a.ajaxValidCache,function(e,a){if(!a)return t=!1,!1}),t},_checkAjaxFieldStatus:function(e,a){return!0==a.ajaxValidCache[e]},_validateFields:function(t){var i=t.data('jqv'),r=!1;t.trigger('jqv.form.validating');var o=null;if(t.find('['+i.validateAttribute+'*=validate]').not(':disabled').each(function(){var l=e(this),s=[];if(0>e.inArray(l.attr('name'),s)){if(r|=a._validateField(l,i),r&&null==o&&(l.is(':hidden')&&i.prettySelect?o=l=t.find('#'+i.usePrefix+a._jqSelector(l.attr('id'))+i.useSuffix):(l.data('jqv-prompt-at')instanceof jQuery?l=l.data('jqv-prompt-at'):l.data('jqv-prompt-at')&&(l=e(l.data('jqv-prompt-at'))),o=l)),i.doNotShowAllErrosOnSubmit)return!1;if(s.push(l.attr('name')),!0==i.showOneMessage&&r)return!1}}),t.trigger('jqv.form.result',[r]),r){if(i.scroll){var l=o.offset().top,s=o.offset().left,n=i.promptPosition;if('string'==typeof n&&-1!=n.indexOf(':')&&(n=n.substring(0,n.indexOf(':'))),'bottomRight'!=n&&'bottomLeft'!=n){var d=a._getPrompt(o);d&&(l=d.offset().top)}if(i.scrollOffset&&(l-=i.scrollOffset),i.isOverflown){var u=e(i.overflownDIV);if(!u.length)return!1;var m=u.scrollTop(),p=-parseInt(u.offset().top);l+=m+p-5;var c=e(i.overflownDIV+':not(:animated)');c.animate({scrollTop:l},1100,function(){i.focusFirstField&&o.focus()})}else e('html, body').animate({scrollTop:l},1100,function(){i.focusFirstField&&o.focus()}),e('html, body').animate({scrollLeft:s},1100)}else i.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(t,r){var i=t.serialize(),o=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:'GET',l=r.ajaxFormValidationURL?r.ajaxFormValidationURL:t.attr('action'),s=r.dataType?r.dataType:'json';e.ajax({type:o,url:l,cache:!1,dataType:s,data:i,form:t,methods:a,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(t,r)},error:function(e,t){r.onFailure?r.onFailure(e,t):a._ajaxError(e,t)},success:function(o){if('json'==s&&!0!==o){for(var l=!1,n=0;n<o.length;n++){var i=o[n],d=i[0],u=e(e('#'+d)[0]);if(1==u.length){var m=i[2];if(!0!=i[1]){if(l|=!0,r.allrules[m]){var p=r.allrules[m].alertText;p&&(m=p)}r.showPrompts&&a._showPrompt(u,m,'',!1,r,!0)}else if(''==m||!m)a._closePrompt(u);else{if(r.allrules[m]){var p=r.allrules[m].alertTextOk;p&&(m=p)}r.showPrompts&&a._showPrompt(u,m,'pass',!1,r,!0)}}}r.onAjaxFormComplete(!l,t,o,r)}else r.onAjaxFormComplete(!0,t,o,r)}})},_validateField:function(t,r,o){if(t.attr('id')||(t.attr('id','form-validation-field-'+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),!r.validateNonVisibleFields&&(t.is(':hidden')&&!r.prettySelect||t.parent().is(':hidden')))return!1;var l=t.attr(r.validateAttribute),s=/validate\[(.*)\]/.exec(l);if(!s)return!1;var n=s[1],d=n.split(/\[|,|\]/),u=t.attr('name'),m='',p='',c=!1,v=!1;r.isError=!1,r.showArrow=!0,0<r.maxErrorsPerField&&(v=!0);for(var f=e(t.closest('form, .validationEngineContainer')),g=0;g<d.length;g++)d[g]=d[g].replace(' ',''),''===d[g]&&delete d[g];for(var g=0,i=0;g<d.length;g++){if(v&&i>=r.maxErrorsPerField){if(!c){var _=e.inArray('required',d);c=-1!=_&&_>=g}break}var h=void 0;switch(d[g]){case'required':c=!0,h=a._getErrorMessage(f,t,d[g],d,g,r,a._required);break;case'custom':h=a._getErrorMessage(f,t,d[g],d,g,r,a._custom);break;case'groupRequired':var x='['+r.validateAttribute+'*='+d[g+1]+']',C=f.find(x).eq(0);C[0]!=t[0]&&(a._validateField(C,r,o),r.showArrow=!0),h=a._getErrorMessage(f,t,d[g],d,g,r,a._groupRequired),h&&(c=!0),r.showArrow=!1;break;case'ajax':h=a._ajax(t,d,g,r),h&&(p='load');break;case'minSize':h=a._getErrorMessage(f,t,d[g],d,g,r,a._minSize);break;case'maxSize':h=a._getErrorMessage(f,t,d[g],d,g,r,a._maxSize);break;case'min':h=a._getErrorMessage(f,t,d[g],d,g,r,a._min);break;case'max':h=a._getErrorMessage(f,t,d[g],d,g,r,a._max);break;case'past':h=a._getErrorMessage(f,t,d[g],d,g,r,a._past);break;case'future':h=a._getErrorMessage(f,t,d[g],d,g,r,a._future);break;case'dateRange':var x='['+r.validateAttribute+'*='+d[g+1]+']';r.firstOfGroup=f.find(x).eq(0),r.secondOfGroup=f.find(x).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(h=a._getErrorMessage(f,t,d[g],d,g,r,a._dateRange)),h&&(c=!0),r.showArrow=!1;break;case'dateTimeRange':var x='['+r.validateAttribute+'*='+d[g+1]+']';r.firstOfGroup=f.find(x).eq(0),r.secondOfGroup=f.find(x).eq(1),(r.firstOfGroup[0].value||r.secondOfGroup[0].value)&&(h=a._getErrorMessage(f,t,d[g],d,g,r,a._dateTimeRange)),h&&(c=!0),r.showArrow=!1;break;case'maxCheckbox':t=e(f.find('input[name=\''+u+'\']')),h=a._getErrorMessage(f,t,d[g],d,g,r,a._maxCheckbox);break;case'minCheckbox':t=e(f.find('input[name=\''+u+'\']')),h=a._getErrorMessage(f,t,d[g],d,g,r,a._minCheckbox);break;case'equals':h=a._getErrorMessage(f,t,d[g],d,g,r,a._equals);break;case'funcCall':h=a._getErrorMessage(f,t,d[g],d,g,r,a._funcCall);break;case'creditCard':h=a._getErrorMessage(f,t,d[g],d,g,r,a._creditCard);break;case'condRequired':h=a._getErrorMessage(f,t,d[g],d,g,r,a._condRequired),void 0!==h&&(c=!0);break;default:}var b=!1;if('object'==typeof h)switch(h.status){case'_break':b=!0;break;case'_error':h=h.message;break;case'_error_no_prompt':return!0;break;default:}if(b)break;'string'==typeof h&&(m+=h+'<br/>',r.isError=!0,i++)}!c&&!t.val()&&1>t.val().length&&0>e.inArray('equals',d)&&(r.isError=!1);var T=t.prop('type'),E=t.data('promptPosition')||r.promptPosition;('radio'==T||'checkbox'==T)&&1<f.find('input[name=\''+u+'\']').size()&&(t='inline'===E?e(f.find('input[name=\''+u+'\'][type!=hidden]:last')):e(f.find('input[name=\''+u+'\'][type!=hidden]:first')),r.showArrow=r.showArrowOnRadioAndCheckbox),t.is(':hidden')&&r.prettySelect&&(t=f.find('#'+r.usePrefix+a._jqSelector(t.attr('id'))+r.useSuffix)),r.isError&&r.showPrompts?a._showPrompt(t,m,p,!1,r):a._closePrompt(t),t.trigger('jqv.field.result',[t,r.isError,m]);var F=e.inArray(t[0],r.InvalidFields);return-1==F?r.isError&&r.InvalidFields.push(t[0]):!r.isError&&r.InvalidFields.splice(F,1),a._handleStatusCssClasses(t,r),r.isError&&r.onFieldFailure&&r.onFieldFailure(t),!r.isError&&r.onFieldSuccess&&r.onFieldSuccess(t),r.isError},_handleStatusCssClasses:function(e,a){a.addSuccessCssClassToField&&e.removeClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&e.removeClass(a.addFailureCssClassToField),a.addSuccessCssClassToField&&!a.isError&&e.addClass(a.addSuccessCssClassToField),a.addFailureCssClassToField&&a.isError&&e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(t,r,o,l,s,i,n){var d=jQuery.inArray(o,l);if('custom'===o||'funcCall'===o){var u=l[d+1];o=o+'['+u+']',delete l[d]}var m,p=o,c=r.attr('data-validation-engine')?r.attr('data-validation-engine'):r.attr('class'),v=c.split(' ');if(m='future'==o||'past'==o||'maxCheckbox'==o||'minCheckbox'==o?n(t,r,l,s,i):n(r,l,s,i),void 0!=m){var f=a._getCustomErrorMessage(e(r),v,p,i);f&&(m=f)}return m},_getCustomErrorMessage:function(e,t,r,o){var l=!1,s=/^custom\[.*\]$/.test(r)?a._validityProp.custom:a._validityProp[r];if(void 0!=s&&(l=e.attr('data-errormessage-'+s),void 0!=l))return l;if(l=e.attr('data-errormessage'),void 0!=l)return l;var n='#'+e.attr('id');if('undefined'!=typeof o.custom_error_messages[n]&&'undefined'!=typeof o.custom_error_messages[n][r])l=o.custom_error_messages[n][r].message;else if(0<t.length)for(var d,u=0;u<t.length&&0<t.length;u++)if(d='.'+t[u],'undefined'!=typeof o.custom_error_messages[d]&&'undefined'!=typeof o.custom_error_messages[d][r]){l=o.custom_error_messages[d][r].message;break}return l||'undefined'==typeof o.custom_error_messages[r]||'undefined'==typeof o.custom_error_messages[r].message||(l=o.custom_error_messages[r].message),l},_validityProp:{required:'value-missing',custom:'custom-error',groupRequired:'value-missing',ajax:'custom-error',minSize:'range-underflow',maxSize:'range-overflow',min:'range-underflow',max:'range-overflow',past:'type-mismatch',future:'type-mismatch',dateRange:'type-mismatch',dateTimeRange:'type-mismatch',maxCheckbox:'range-overflow',minCheckbox:'range-underflow',equals:'pattern-mismatch',funcCall:'custom-error',creditCard:'pattern-mismatch',condRequired:'value-missing'},_required:function(a,t,r,i,o){switch(a.prop('type')){case'radio':case'checkbox':if(o){if(!a.attr('checked'))return i.allrules[t[r]].alertTextCheckboxMultiple;break}var l=a.closest('form, .validationEngineContainer'),s=a.attr('name');if(0==l.find('input[name=\''+s+'\']:checked').size())return 1==l.find('input[name=\''+s+'\']:visible').size()?i.allrules[t[r]].alertTextCheckboxe:i.allrules[t[r]].alertTextCheckboxMultiple;break;case'text':case'password':case'textarea':case'file':case'select-one':case'select-multiple':default:var n=e.trim(a.val()),d=e.trim(a.attr('data-validation-placeholder')),u=e.trim(a.attr('placeholder'));if(!n||d&&n==d||u&&n==u)return i.allrules[t[r]].alertText;}},_groupRequired:function(t,r,o,i){var l='['+i.validateAttribute+'*='+r[o+1]+']',s=!1;if(t.closest('form, .validationEngineContainer').find(l).each(function(){if(!a._required(e(this),r,o,i))return s=!0,!1}),!s)return i.allrules[r[o]].alertText},_custom:function(e,a,t,i){var r,o=a[t+1],l=i.allrules[o];if(!l)return void alert('jqv:custom rule not found - '+o);if(l.regex){var s=l.regex;if(!s)return void alert('jqv:custom regex not found - '+o);var n=new RegExp(s);if(!n.test(e.val()))return i.allrules[o].alertText}else if(l.func){if(r=l.func,'function'!=typeof r)return void alert('jqv:custom parameter \'function\' is no function - '+o);if(!r(e,a,t,i))return i.allrules[o].alertText}else return void alert('jqv:custom type not allowed '+o)},_funcCall:function(e,a,t,i){var r,o=a[t+1];if(-1<o.indexOf('.')){for(var l=o.split('.'),s=window;l.length;)s=s[l.shift()];r=s}else r=window[o]||i.customFunctions[o];return'function'==typeof r?r(e,a,t,i):void 0},_equals:function(a,t,r,i){var o=t[r+1];if(a.val()!=e('#'+o).val())return i.allrules.equals.alertText},_maxSize:function(e,a,t,i){var r=a[t+1],o=e.val().length;if(o>r){var l=i.allrules.maxSize;return l.alertText+r+l.alertText2}},_minSize:function(e,a,t,i){var r=a[t+1],o=e.val().length;if(o<r){var l=i.allrules.minSize;return l.alertText+r+l.alertText2}},_min:function(e,a,t,i){var r=parseFloat(a[t+1]),o=parseFloat(e.val());if(o<r){var l=i.allrules.min;return l.alertText2?l.alertText+r+l.alertText2:l.alertText+r}},_max:function(e,a,t,i){var r=parseFloat(a[t+1]),o=parseFloat(e.val());if(o>r){var l=i.allrules.max;return l.alertText2?l.alertText+r+l.alertText2:l.alertText+r}},_past:function(t,r,o,l,i){var s,n=o[l+1],d=e(t.find('*[name=\''+n.replace(/^#+/,'')+'\']'));if('now'==n.toLowerCase())s=new Date;else if(void 0!=d.val()){if(d.is(':disabled'))return;s=a._parseDate(d.val())}else s=a._parseDate(n);var u=a._parseDate(r.val());if(u>s){var m=i.allrules.past;return m.alertText2?m.alertText+a._dateToString(s)+m.alertText2:m.alertText+a._dateToString(s)}},_future:function(t,r,o,l,i){var s,n=o[l+1],d=e(t.find('*[name=\''+n.replace(/^#+/,'')+'\']'));if('now'==n.toLowerCase())s=new Date;else if(void 0!=d.val()){if(d.is(':disabled'))return;s=a._parseDate(d.val())}else s=a._parseDate(n);var u=a._parseDate(r.val());if(u<s){var m=i.allrules.future;return m.alertText2?m.alertText+a._dateToString(s)+m.alertText2:m.alertText+a._dateToString(s)}},_isDate:function(e){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return a.test(e)},_isDateTime:function(e){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return a.test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(e,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:a._isDate(i.firstOfGroup[0].value)&&a._isDate(i.secondOfGroup[0].value)?a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_dateTimeRange:function(e,t,r,i){return!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value?i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:a._isDateTime(i.firstOfGroup[0].value)&&a._isDateTime(i.secondOfGroup[0].value)?a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2:i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2},_maxCheckbox:function(e,a,t,r,i){var o=t[r+1],l=a.attr('name'),s=e.find('input[name=\''+l+'\']:checked').size();if(s>o)return i.showArrow=!1,i.allrules.maxCheckbox.alertText2?i.allrules.maxCheckbox.alertText+' '+o+' '+i.allrules.maxCheckbox.alertText2:i.allrules.maxCheckbox.alertText},_minCheckbox:function(e,a,t,r,i){var o=t[r+1],l=a.attr('name'),s=e.find('input[name=\''+l+'\']:checked').size();if(s<o)return i.showArrow=!1,i.allrules.minCheckbox.alertText+' '+o+' '+i.allrules.minCheckbox.alertText2},_creditCard:function(e,a,t,i){var r=!1,o=e.val().replace(/ +/g,'').replace(/-+/g,''),l=o.length;if(14<=l&&16>=l&&0<parseInt(o)){var s,n=0,t=l-1,d=1,u=new String;do s=parseInt(o.charAt(t)),u+=0==d++%2?2*s:s;while(0<=--t);for(t=0;t<u.length;t++)n+=parseInt(u.charAt(t));r=0==n%10}return r?void 0:i.allrules.creditCard.alertText},_ajax:function(t,r,o,i){var l=r[o+1],s=i.allrules[l],n=s.extraData,d=s.extraDataDynamic,u={fieldId:t.attr('id'),fieldValue:t.val()};if('object'==typeof n)e.extend(u,n);else if('string'==typeof n)for(var m,p=n.split('&'),o=0;o<p.length;o++)m=p[o].split('='),m[0]&&m[0]&&(u[m[0]]=m[1]);if(d)for(var c,v=(d+'').split(','),o=0;o<v.length;o++)if(c=v[o],e(c).length){var f=t.closest('form, .validationEngineContainer').find(c).val(),g=c.replace('#','')+'='+escape(f);u[c.replace('#','')]=f}return('field'==i.eventTrigger&&delete i.ajaxValidCache[t.attr('id')],!i.isError&&!a._checkAjaxFieldStatus(t.attr('id'),i))?(e.ajax({type:i.ajaxFormValidationMethod,url:s.url,cache:!1,dataType:'json',data:u,field:t,rule:s,methods:a,options:i,beforeSend:function(){},error:function(e,t){i.onFailure?i.onFailure(e,t):a._ajaxError(e,t)},success:function(r){var o=r[0],l=e('#'+o).eq(0);if(1==l.length){var n=r[1],d=r[2];if(!n){if(i.ajaxValidCache[o]=!1,i.isError=!0,!d)d=s.alertText;else if(i.allrules[d]){var u=i.allrules[d].alertText;u&&(d=u)}i.showPrompts&&a._showPrompt(l,d,'',!0,i)}else{if(i.ajaxValidCache[o]=!0,!d)d=s.alertTextOk;else if(i.allrules[d]){var u=i.allrules[d].alertTextOk;u&&(d=u)}i.showPrompts&&(d?a._showPrompt(l,d,'pass',!0,i):a._closePrompt(l)),'submit'==i.eventTrigger&&t.closest('form').submit()}}l.trigger('jqv.field.result',[l,i.isError,d])}}),s.alertTextLoad):void 0},_ajaxError:function(e,a){0==e.status&&null==a?alert('The page is not served from a server! ajax call failed'):'undefined'!=typeof console&&console.log('Ajax error: '+e.status+' '+a)},_dateToString:function(e){return e.getFullYear()+'-'+(e.getMonth()+1)+'-'+e.getDate()},_parseDate:function(e){var a=e.split('-');return a==e&&(a=e.split('/')),a==e?(a=e.split('.'),new Date(a[2],a[1]-1,a[0])):new Date(a[0],a[1]-1,a[2])},_showPrompt:function(t,i,r,o,l,s){t.data('jqv-prompt-at')instanceof jQuery?t=t.data('jqv-prompt-at'):t.data('jqv-prompt-at')&&(t=e(t.data('jqv-prompt-at')));var n=a._getPrompt(t);s&&(n=!1),e.trim(i)&&(n?a._updatePrompt(t,n,i,r,o,l):a._buildPrompt(t,i,r,o,l))},_buildPrompt:function(t,i,r,o,l){var s=e('<div>');switch(s.addClass(a._getClassName(t.attr('id'))+'formError'),s.addClass('parentForm'+a._getClassName(t.closest('form, .validationEngineContainer').attr('id'))),s.addClass('formError'),r){case'pass':s.addClass('greenPopup');break;case'load':s.addClass('blackPopup');break;default:}o&&s.addClass('ajaxed');var n=e('<div>').addClass('formErrorContent').html(i).appendTo(s),d=t.data('promptPosition')||l.promptPosition;if(l.showArrow){var u=e('<div>').addClass('formErrorArrow');if('string'==typeof d){var m=d.indexOf(':');-1!=m&&(d=d.substring(0,m))}'bottomLeft'===d||'bottomRight'===d?(s.find('.formErrorContent').before(u),u.addClass('formErrorArrowBottom').html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>')):'topLeft'===d||'topRight'===d?(u.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),s.append(u)):void 0}l.addPromptClass&&s.addClass(l.addPromptClass);var p=t.attr('data-required-class');if(void 0!==p)s.addClass(p);else if(l.prettySelect&&e('#'+t.attr('id')).next().is('select')){var c=e('#'+t.attr('id').substr(l.usePrefix.length).substring(l.useSuffix.length)).attr('data-required-class');void 0!==c&&s.addClass(c)}s.css({opacity:0}),'inline'===d?(s.addClass('inline'),'undefined'!=typeof t.attr('data-prompt-target')&&0<e('#'+t.attr('data-prompt-target')).length?s.appendTo(e('#'+t.attr('data-prompt-target'))):t.after(s)):t.before(s);var m=a._calculatePosition(t,s,l);return s.css({position:'inline'===d?'relative':'absolute',top:m.callerTopPosition,left:m.callerleftPosition,marginTop:m.marginTopSize,opacity:0}).data('callerField',t),l.autoHidePrompt&&setTimeout(function(){s.animate({opacity:0},function(){s.closest('.formErrorOuter').remove(),s.remove()})},l.autoHideDelay),s.animate({opacity:0.87})},_updatePrompt:function(e,t,i,r,o,l,s){if(t){'undefined'!=typeof r&&('pass'==r?t.addClass('greenPopup'):t.removeClass('greenPopup'),'load'==r?t.addClass('blackPopup'):t.removeClass('blackPopup')),o?t.addClass('ajaxed'):t.removeClass('ajaxed'),t.find('.formErrorContent').html(i);var n=a._calculatePosition(e,t,l),d={top:n.callerTopPosition,left:n.callerleftPosition,marginTop:n.marginTopSize};s?t.css(d):t.animate(d)}},_closePrompt:function(e){var t=a._getPrompt(e);t&&t.fadeTo('fast',0,function(){t.parent('.formErrorOuter').remove(),t.remove()})},closePrompt:function(e){return a._closePrompt(e)},_getPrompt:function(t){var i=e(t).closest('form, .validationEngineContainer').attr('id'),r=a._getClassName(t.attr('id'))+'formError',o=e('.'+a._escapeExpression(r)+'.parentForm'+a._getClassName(i))[0];if(o)return e(o)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,'\\$1')},isRTL:function(a){var t=e(document),i=e('body'),r=a&&a.hasClass('rtl')||a&&'rtl'===(a.attr('dir')||'').toLowerCase()||t.hasClass('rtl')||'rtl'===(t.attr('dir')||'').toLowerCase()||i.hasClass('rtl')||'rtl'===(i.attr('dir')||'').toLowerCase();return!!r},_calculatePosition:function(e,a,t){var i,r,o,l=e.width(),s=e.position().left,n=e.position().top,d=e.height(),u=a.height();i=r=0,o=-u;var m=e.data('promptPosition')||t.promptPosition,p='',c='',v=0,f=0;switch('string'==typeof m&&-1!=m.indexOf(':')&&(p=m.substring(m.indexOf(':')+1),m=m.substring(0,m.indexOf(':')),-1!=p.indexOf(',')&&(c=p.substring(p.indexOf(',')+1),p=p.substring(0,p.indexOf(',')),f=parseInt(c),isNaN(f)&&(f=0)),v=parseInt(p),isNaN(p)&&(p=0)),m){default:case'topRight':r+=s+l-27,i+=n;break;case'topLeft':i+=n,r+=s;break;case'centerRight':i=n+4,o=0,r=s+e.outerWidth(!0)+5;break;case'centerLeft':r=s-(a.width()+2),i=n+4,o=0;break;case'bottomLeft':i=n+e.height()+5,o=0,r=s;break;case'bottomRight':r=s+l-27,i=n+e.height()+5,o=0;break;case'inline':r=0,i=0,o=0;}return r+=v,i+=f,{callerTopPosition:i+'px',callerleftPosition:r+'px',marginTopSize:o+'px'}},_saveOptions:function(a,t){if(e.validationEngineLanguage)var i=e.validationEngineLanguage.allRules;else e.error('jQuery.validationEngine rules are not loaded, plz add localization files to the page');e.validationEngine.defaults.allrules=i;var r=e.extend(!0,{},e.validationEngine.defaults,t);return a.data('jqv',r),r},_getClassName:function(e){if(e)return e.replace(/:/g,'_').replace(/\./g,'_')},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1')},_condRequired:function(e,t,r,i){var o,l;for(o=r+1;o<t.length;o++)if(l=jQuery('#'+t[o]).first(),l.length&&void 0==a._required(l,['required'],0,i,!0))return a._required(e,['required'],0,i)},_submitButtonClick:function(){var a=e(this),t=a.closest('form, .validationEngineContainer');t.data('jqv_submitButton',a.attr('id'))}};e.fn.validationEngine=function(t){var i=e(this);return i[0]?'string'==typeof t&&'_'!=t.charAt(0)&&a[t]?('showPrompt'!=t&&'hide'!=t&&'hideAll'!=t&&a.init.apply(i),a[t].apply(i,Array.prototype.slice.call(arguments,1))):'object'!=typeof t&&t?void e.error('Method '+t+' does not exist in jQuery.validationEngine'):(a.init.apply(i,arguments),a.attach.apply(i)):i},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:'blur',scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:'topRight',bindMethod:'bind',inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:'get',onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:'class',addSuccessCssClassToField:'',addFailureCssClassToField:'',autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:0.3,prettySelect:!1,addPromptClass:'',usePrefix:'',useSuffix:'',showOneMessage:!1}},e(function(){e.validationEngine.defaults.promptPosition=a.isRTL()?'topLeft':'topRight'})})(jQuery);